[[_TOC_]]

#git

## git使用
游戏地址<http://learngitbranching.js.org/?demo>

### 基础篇

#### 提交 git commit

#### 新建分支 git branch

```
$git branch BranchName #新建名字为BranchName的分支
$git checkout BranchName #切换到新分支上
```

#### 创建并切换到分支上
```
git checkout -b branchName #创建并切换到branchName分支上
```

#### 合并分支 git merge
例如：在分支A与分支B合并
```
git checkout 
A #切换到分支A
git merge B #在A中与B合并
```

#### 强制修改分支位置
```
git branch -f master HEAD~3 #将 master 分支强制指向 HEAD 的第 3 级父提交,只移动master不移动HEAD
```

#### git rebase
Rebase 实际上就是取出一系列的提交记录，“复制”它们，然后在另外一个地方逐个的放下去。
Rebase 的优势就是可以创造更线性的提交历史，这听上去有些难以理解。如果只允许使用 Rebase 的话，代码库的提交历史将会变得异常清晰。


### 高级篇

#### 分离HEAD
```
$git checkout c4
```

#### 相对引用(^)
使用 ^ 向上移动 1 个提交记录。例如： master^ 相当于“master 的父节点”，master^^ 是 master 的第二个父节点
```
$git checkout HEAD^
```

#### 相对引用（~）
使用 ~<num> 向上移动多个提交记录，如 ~3

#### 撤销变更

在 Git 里撤销变更的方法很多。和提交一样，撤销变更由底层部分（暂存区的独立文件或者片段）和上层部分（变更到底是通过哪咱方式被撤销的）组成。

##### git reset
通过把分支记录回退几个提交记录来实现撤销改动。你可以将这想象成“改写历史”。git reset 向上移动分支，原来指向的提交记录就跟从来没有提交过一样。虽然在你的本地分支中使用 `git reset` 很方便，但是这种“改写历史”的方法对大家一起使用的远程分支是无效的

```
$git reset HEAD~1
```



##### git revert

在我们要撤销的提交记录后面居然多了一个新提交！这是因为新提交记录 `C2'` 引入了**更改** —— 这些更改刚好是用来撤销 `C2` 这个提交的。也就是说 `C2'` 的状态与 `C1` 是相同的。

revert 之后就可以把你的更改推送到远程仓库与别人分享啦。

```
$git revert HEAD
```



### 移动提交记录(整理提交记录)

####  git cherry-pick

当你知道你所需要的提交记录（**并且**还知道这些提交记录的哈希值）时, 用 cherry-pick 再好不过了 —— 没有比这更简单的方式了。

```
$git cherry-pick C2 C4  #复制C2和C4到当前的分支
```

#### 交互式rebase

如果你不清楚你想要的提交记录的哈希值呢? 可以利用交互式的 rebase —— 如果你想从一系列的提交记录中找到想要的记录, 这就是最好的方法了

交互式 rebase 指的是使用带参数 `--interactive` 的 rebase 命令, 简写为 `-i`

如果你在命令后增加了这个选项, Git 会打开一个 UI 界面并列出将要被复制到目标分支的备选提交记录，它还会显示每个提交记录的哈希值和提交说明，提交说明有助于你理解这个提交进行了哪些更改。

当 rebase UI界面打开时, 你能做3件事:

- 调整提交记录的顺序（通过鼠标拖放来完成）
- 删除你不想要的提交（通过切换 `pick` 的状态来完成，关闭就意味着你不想要这个提交记录）
- 合并提交。

#### fast-forward

### 杂项

#### 只取一个提交记录（本地栈式提交）

来看一个在开发中经常会遇到的情况：我正在解决某个特别棘手的 Bug，为了便于调试而在代码中添加了一些调试命令并向控制台打印了一些信息。

这些调试和打印语句都在它们各自的提交记录里。最后我终于找到了造成这个 Bug 的根本原因，解决掉以后觉得沾沾自喜！

最后就差把 `bugFix` 分支里的工作合并回 `master` 分支了。你可以选择通过 fast-forward 快速合并到 `master` 分支上，但这样的话 `master` 分支就会包含我这些调试语句了。你肯定不想这样，应该还有更好的方式……

- `git rebase -i`
- `git cherry-pick`

#### 提交的技巧 #1

#### 提交的技巧 #2

#### git tag

#### git describe

### 高级话题

#### 多次Rebase

#### 两个父节点

#### 纠缠不清的分支